<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>RoboFab Objects: PostScriptFontHintValues</title>
<link href="../default.css" type="text/css" rel="stylesheet" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
</head><body>
<div class="leftcontent">
<p class="menu">
	<a href="../index.html">
		Home
	</a>
	
	
</p>
<p class="menu">
	<a href="../howto/index.html">
		How to's
	</a>
	<br />
	<a href="../talks09/index.html">
		Step by step intro
	</a>
	<br />
	<a href="index.html">
		Object reference
	</a>
</p>
</div>
<div id="titlepic">
<img src="../img/offdrawmodel_05.gif" alt="" border="0" />
</div>
<div class="content">
<h1>RoboFab and PostScript font hint values</h1>
<p>
	The font.psHints object, introduced in RoboFab 1.1.3 rev.89 showed it was useful to have access to the various PostScript blues values. But it also proved it was necessary to store them elsewhere. So in RoboFab 1.2 rev.172, the blues values found a permanent home in the new RInfo object. The font.psHints object is still functional, all fields are rerouted to their new places. The font.psHint attribute might be deprecated in the future.
	
	
</p>
<h3>Note on accessing blues data in FontLab Studio</h3>
<p>		A bug in FontLab's own Python attributes relating to blues, otherBlues, familyBlues and familyOtherBlues fields, makes it impossible to set the full number of zones using Python. The actual number of zones which can be set from Python is one less than the number in the Adobe specification. A warning will be printed when a zone will be dropped. Using the FontLab font info dialog, all zones can be set.
</p>
<h3>The font.info attributes (since RoboFab 1.2)</h3>
<p>
	<ul>
		<li><strong>font.info.postscriptBlueValues</strong>	number list	A list of up to 14 integers or floats specifying the values that should be in the Type 1/CFF BlueValues field. This list must contain an even number of integers following the rules defined in the Type 1/CFF specification.</li>
		<li><strong>font.info.postscriptOtherBlues</strong>	number list	A list of up to 10 integers or floats specifying the values that should be in the Type 1/CFF OtherBlues field. This list must contain an even number of integers following the rules defined in the Type 1/CFF specification.</li>
		<li><strong>font.info.postscriptFamilyBlues</strong>	number list	A list of up to 14 integers or floats specifying the values that should be in the Type 1/CFF FamilyBlues field. This list must contain an even number of integers following the rules defined in the Type 1/CFF specification.</li>
		<li><strong>font.info.postscriptFamilyOtherBlues</strong>	number list	A list of up to 10 integers or floats specifying the values that should be in the Type 1/CFF FamilyOtherBlues field. This list must contain an even number of integers following the rules defined in the Type 1/CFF specification.</li>
		<li><strong>font.info.postscriptStemSnapH</strong>	number list	List of horizontal stems sorted in increasing order. Up to 12 integers or floats are possible. This corresponds to the Type 1/CFF StemSnapH field.</li>
		<li><strong>font.info.postscriptStemSnapV</strong>	number list	List of vertical stems sorted in increasing order. Up to 12 integers or floats are possible. This corresponds to the Type 1/CFF StemSnapV field.</li>
		<li><strong>font.info.postscriptBlueFuzz</strong>	integer or float	BlueFuzz value. This corresponds to the Type 1/CFF BlueFuzz field.</li>
		<li><strong>font.info.postscriptBlueShift</strong>	integer or float	BlueShift value. This corresponds to the Type 1/CFF BlueShift field.</li>
		<li><strong>font.info.postscriptBlueScale</strong>	float	BlueScale value. This corresponds to the Type 1/CFF BlueScale field.</li>
		<li><strong>font.info.postscriptForceBold</strong>	boolean	Indicates how the Type 1/CFF ForceBold field should be set.</li>
	</ul>
</p>
<h3>Example, some font.info blues attrs, usage</h3>
<div class="pythonoutput"><pre># example of accessing the postscript blues<br># data using the font.info attributes.<br><span class="py_res">from</span> <span class="py_key">robofab</span>.<span class="py_key">world</span> <span class="py_res">import</span> <span class="py_key">CurrentFont</span><br> <br><span class="py_key">f</span> = <span class="py_key">CurrentFont</span>()<br> <br><span class="py_res">print</span> <span class="py_key">f</span>.<span class="py_key">info</span>.<span class="py_key">postscriptBlueValues</span><br>&gt;&gt; [-<span class="py_num">8</span>, <span class="py_num">0</span>, <span class="py_num">200</span>, <span class="py_num">208</span>, <span class="py_num">214</span>, <span class="py_num">114</span>]<br> <br><span class="py_res">print</span> <span class="py_key">f</span>.<span class="py_key">info</span>.<span class="py_key">postscriptOtherBlues</span><br>&gt;&gt; [-<span class="py_num">136</span>, -<span class="py_num">128</span>, -<span class="py_num">86</span>, -<span class="py_num">84</span>, <span class="py_num">376</span>, <span class="py_num">386</span>]<br> <br><span class="py_res">print</span> <span class="py_key">f</span>.<span class="py_key">info</span>.<span class="py_key">postscriptFamilyBlues</span><br>&gt;&gt; [-<span class="py_num">8</span>, <span class="py_num">0</span>, <span class="py_num">200</span>, <span class="py_num">208</span>, <span class="py_num">214</span>, <span class="py_num">224</span>]<br> <br><span class="py_res">print</span> <span class="py_key">f</span>.<span class="py_key">info</span>.<span class="py_key">postscriptFamilyOtherBlues</span><br>&gt;&gt; [-<span class="py_num">136</span>, -<span class="py_num">128</span>, -<span class="py_num">86</span>, -<span class="py_num">84</span>, <span class="py_num">376</span>, <span class="py_num">386</span>]</pre></div>
<h3>Description of the font.psHint object</h3>
<p>
	PostScriptFontHintValues is the class of the object found at <b>font.psHints</b>. It has a couple of attributes of its own which give you access to the font level PostScript hinting information.
	For exact information on the meaning and usage of these values, please refer to the developer resources at <a href="http://adobe.com">Adobe.com</a>.
	<br />
	The PostScriptFontHintValues objects, in FontLab and NoneLab flavor, can respond to add, sub, mul, rmul, div and rdiv, so you can do math with them, for instance interpolations.
	Available since <a href="http://code.robofab.com/changeset/44">ChangeSet 44</a>.
</p>
<h3>Example, the font.psHints object, usage</h3>
<div class="pythonoutput"><pre># example of accessing the hint data,<br>&nbsp; &nbsp; # using the font.psHints object.<br>&nbsp; &nbsp; <span class="py_res">from</span> <span class="py_key">robofab</span>.<span class="py_key">world</span> <span class="py_res">import</span> <span class="py_key">CurrentFont</span><br> <br>&nbsp; &nbsp; <span class="py_key">f</span> = <span class="py_key">CurrentFont</span>()<br>&nbsp; &nbsp; <span class="py_res">print</span> <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">asDict</span>()<br> <br>&nbsp; &nbsp; &gt;&gt;&gt;{ <span class="py_str">'forceBold'</span>: <span class="py_key">False</span>,<br>&nbsp; &nbsp; <span class="py_str">'blueScale'</span>: <span class="py_num">0.25</span>,<br>&nbsp; &nbsp; <span class="py_str">'blueFuzz'</span>: <span class="py_num">0</span>,<br>&nbsp; &nbsp; <span class="py_str">'blueShift'</span>: <span class="py_num">4</span>,<br>&nbsp; &nbsp; <span class="py_str">'hStems'</span>: [<span class="py_num">24</span>, <span class="py_num">50</span>],<br>&nbsp; &nbsp; <span class="py_str">'vStems'</span>: [<span class="py_num">66</span>, <span class="py_num">4</span>, <span class="py_num">30</span>, <span class="py_num">72</span>, <span class="py_num">50</span>],<br>&nbsp; &nbsp; <span class="py_str">'blueValues'</span>: [[-<span class="py_num">8</span>, <span class="py_num">0</span>], [<span class="py_num">200</span>, <span class="py_num">208</span>], [<span class="py_num">214</span>, <span class="py_num">224</span>]],<br>&nbsp; &nbsp; <span class="py_str">'otherBlues'</span>: [[-<span class="py_num">136</span>, -<span class="py_num">128</span>], [-<span class="py_num">86</span>, -<span class="py_num">84</span>], [<span class="py_num">376</span>, <span class="py_num">386</span>]],<br>&nbsp; &nbsp; <span class="py_str">'familyOtherBlues'</span>: [[-<span class="py_num">136</span>, -<span class="py_num">128</span>], [-<span class="py_num">86</span>, -<span class="py_num">84</span>], [<span class="py_num">376</span>, <span class="py_num">386</span>]],<br>&nbsp; &nbsp; <span class="py_str">'familyBlues'</span>: [[-<span class="py_num">8</span>, <span class="py_num">0</span>], [<span class="py_num">200</span>, <span class="py_num">208</span>], [<span class="py_num">214</span>, <span class="py_num">224</span>]], }</pre></div>
<div class="pythonoutput"><pre># example of scaling the hint data.<br>&nbsp; &nbsp; <span class="py_res">from</span> <span class="py_key">robofab</span>.<span class="py_key">world</span> <span class="py_res">import</span> <span class="py_key">CurrentFont</span><br> <br>&nbsp; &nbsp; <span class="py_key">f</span> = <span class="py_key">CurrentFont</span>()<br>&nbsp; &nbsp; <span class="py_res">print</span> <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">asDict</span>()<br> <br><br>&nbsp; &nbsp; <span class="py_key">ps2</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span> * <span class="py_num">.5</span>&nbsp; &nbsp; # a math operation returns a new, unbound object<br>&nbsp; &nbsp; <span class="py_key">ps2</span>.<span class="py_key">round</span>()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # it needs to be rounded first<br> <br>&nbsp; &nbsp; <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">update</span>(<span class="py_key">ps2</span>)&nbsp; &nbsp; # now you can add the values to the FL object<br>&nbsp; &nbsp; <span class="py_key">f</span>.<span class="py_key">update</span>()&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # see those zones skip!</pre></div>
<h3>Attributes</h3>
<ul>
	<li><strong>blueShift</strong>: value for blue shift. Integer in FontLab, float or int in NoneLab.</li>
	<li><strong>blueScale</strong>: value for blue scale. Float in FontLab and NoneLab.</li>
	<li><strong>blueFuzz</strong>: value for blue fuzz. Integer in FontLab, float or int in NoneLab.</li>
	<li><strong>forceBold</strong>: value for force bold. Boolean in FontLab and NoneLab</li>
	<li><strong>blueValues</strong>: list of pairs of numbers indicating the primary alignment zones. Integers in FontLab, floats or ints in NoneLab.</li>
	<li><strong>otherBlues</strong>: list of pairs of numbers indicating the secondary alignment zones. Integers in FontLab, floats or ints in NoneLab.</li>
	<li><strong>familyBlues</strong>: list of pairs of numbers indicating the primary family alignment zones. Integers in FontLab, floats or ints in NoneLab.</li>
	<li><strong>familyOtherBlues</strong>: list of pairs of numbers indicating the secondary family alignment zones. Integers in FontLab, floats or ints in NoneLab.</li>
	<li><strong>vStems</strong>: list of numbers for the vertical stems. Integers in FontLab, floats or ints in NoneLab.</li>
	<li><strong>hStems</strong>: list of numbers for the horizontal stems. Integers in FontLab, floats or ints in NoneLab.</li>
</ul>
<h3>Methods</h3>
<ul>
	<li><strong>copy()</strong>: returns a copy of the object. Both in FontLab and NoneLab the copy will be an objectsRF.PostScriptFontHintValues</li>
	<li><strong>round()</strong>: round the values to ints as much as the nature of the values allows. Note: blueScale is not rounded, it is a float, forceBold is set to False if -0.5 < value < 0.5. Otherwise it will be True, blueShift, blueFuzz are rounded to int, stems are rounded to int, blues are rounded to int.
	</li>
	<li><strong>asDict()</strong>: returns a dictionary with all attributes and values of this object. </li>
	<li><strong>fromDict(aDict)</strong>: this will look for familiar attributes in aDict and assign the value to the object.</li>
	<li><strong>update(anotherPSHintsObject)</strong>: this will copy values from the other object.</li>
</ul>
<h3>Examples</h3>
<div class="pythonsource"><pre>#FLM: Get and set font level PostScript hint data.<br><span class="py_res">from</span> <span class="py_key">robofab</span>.<span class="py_key">world</span> <span class="py_res">import</span> <span class="py_key">CurrentFont</span><br> <br><span class="py_str">"""<br>&nbsp; &nbsp; This script shows the way to get to the font level postscript hint values.<br>&nbsp; &nbsp; These values were available from the fl layer, but not in RoboFab.<br>&nbsp; &nbsp; Now they're available in RoboFab in a slightly easier to use format.<br>&nbsp; &nbsp; The values also export to UFO and import from UFO.<br>&nbsp; &nbsp; <br>&nbsp; &nbsp; Check the FontLab FontInfo panel / Hinting Settings<br> <br>"""</span><br> <br><span class="py_key">f</span> = <span class="py_key">CurrentFont</span>()<br> <br># the fontlevel postscript hint data is accessible through the psHints attribute<br> <br><span class="py_res">print</span><br><span class="py_res">print</span> <span class="py_str">"This script shows the attributes of psHints:"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span><br> <br># now let's have a look at the values<br># blueScale, blueShift, blueFuzz and forceBold are all single values.<br> <br><span class="py_res">print</span> <span class="py_str">"blueScale"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueScale</span><br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueScale</span> = <span class="py_num">.5</span><br><span class="py_res">print</span> <span class="py_str">"blueScale changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueScale</span><br> <br><span class="py_res">print</span> <span class="py_str">"blueShift"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueShift</span><br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueShift</span> = <span class="py_num">5</span><br><span class="py_res">print</span> <span class="py_str">"blueShift changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueShift</span><br> <br><span class="py_res">print</span> <span class="py_str">"blueFuzz"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueFuzz</span><br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueFuzz</span> = <span class="py_num">0</span><br><span class="py_res">print</span> <span class="py_str">"blueFuzz changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueFuzz</span><br> <br><span class="py_res">print</span> <span class="py_str">"forceBold"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">forceBold</span><br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">forceBold</span> = <span class="py_num">1</span><br><span class="py_res">print</span> <span class="py_str">"forceBold changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">forceBold</span><br> <br><br># the following values are represented as lists.<br># Important Note: you can only set the whole list, not individual items.<br># So get the list, make changes to it, then set the list<br># Zones are represented as tuples of integers, so it's easier to<br># see which values belong together. FL stores the values as<br># a single list of numbers.<br> <br># T1 spec says blueValues, FL says Primary Alignment Zones, under "Set Local Alignment Zones".<br><span class="py_res">print</span> <span class="py_str">"blueValues"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueValues</span><br># remove the last zone<br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueValues</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueValues</span>[:-<span class="py_num">1</span>]<br><span class="py_res">print</span> <span class="py_str">"blueValues changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueValues</span><br># add a new zone<br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueValues</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueValues</span> + [(<span class="py_num">750</span>, <span class="py_num">770</span>)]<br><span class="py_res">print</span> <span class="py_str">"blueValues changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">blueValues</span><br> <br># T1 spec says otherBlues, FL says Secondary Alignment Zones, under "Set Local Alignment Zones".<br><span class="py_res">print</span> <span class="py_str">"otherBlues"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">otherBlues</span><br># remove the last zone<br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">otherBlues</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">otherBlues</span>[:-<span class="py_num">1</span>]<br><span class="py_res">print</span> <span class="py_str">"otherBlues changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">otherBlues</span><br># add a new zone<br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">otherBlues</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">otherBlues</span> + [(<span class="py_num">750</span>, <span class="py_num">770</span>)]<br><span class="py_res">print</span> <span class="py_str">"otherBlues changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">otherBlues</span><br> <br># T1 spec says familyBlues, FL says Primary Alignment Zones, under "Set Family Alignment Zones".<br><span class="py_res">print</span> <span class="py_str">"familyBlues"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyBlues</span><br># remove the last zone<br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyBlues</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyBlues</span>[:-<span class="py_num">1</span>]<br><span class="py_res">print</span> <span class="py_str">"familyBlues changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyBlues</span><br># add a new zone<br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyBlues</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyBlues</span> + [(<span class="py_num">750</span>, <span class="py_num">770</span>)]<br><span class="py_res">print</span> <span class="py_str">"familyBlues changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyBlues</span><br> <br># T1 spec says familyOtherBlues, FL says Seconday Alignment Zones, under "Set Family Alignment Zones".<br><span class="py_res">print</span> <span class="py_str">"familyOtherBlues"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyOtherBlues</span><br># remove the last zone<br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyOtherBlues</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyOtherBlues</span>[:-<span class="py_num">1</span>]<br><span class="py_res">print</span> <span class="py_str">"familyOtherBlues changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyOtherBlues</span><br># add a new zone<br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyOtherBlues</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyOtherBlues</span> + [(<span class="py_num">750</span>, <span class="py_num">770</span>)]<br><span class="py_res">print</span> <span class="py_str">"familyOtherBlues changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">familyOtherBlues</span><br> <br># The horizontal stems are represented as a list of single values.<br><span class="py_res">print</span> <span class="py_str">"hStems"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">hStems</span><br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">hStems</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">hStems</span>[:-<span class="py_num">1</span>]<br><span class="py_res">print</span> <span class="py_str">"hStems changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">hStems</span><br># add a new stem<br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">hStems</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">hStems</span> + [<span class="py_num">100</span>]<br><span class="py_res">print</span> <span class="py_str">"hStems changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">hStems</span><br> <br># The vertical stems are represented as a list of single values.<br><span class="py_res">print</span> <span class="py_str">"vStems"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">vStems</span><br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">vStems</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">vStems</span>[:-<span class="py_num">1</span>]<br><span class="py_res">print</span> <span class="py_str">"vStems changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">vStems</span><br># add a new stem<br><span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">vStems</span> = <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">vStems</span> + [<span class="py_num">100</span>]<br><span class="py_res">print</span> <span class="py_str">"vStems changed"</span>, <span class="py_key">f</span>.<span class="py_key">psHints</span>.<span class="py_key">vStems</span><br> <br></pre></div><div class="pythonsourcetitle"><a href="examples/usagePSHintData.py" target="new"><strong>➔ Download this.</strong></a></div>
</div>
</body></html>