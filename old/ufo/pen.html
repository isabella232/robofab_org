<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>RoboFab Pen Protocol</title>
<link href="../default.css" type="text/css" rel="stylesheet" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700' rel='stylesheet' type='text/css'>
</head><body>




<div class="leftcontent">
<p class="menu">
	<a href="../index.html">
		Home
	</a>
	<br />
	<a href="../download/index.html">
		Download v1.1.1
	</a>
	<br />
	<a href="http://code.robofab.com">
		Trac + svn
	</a>
</p>

<p class="menu">
	<a href="../howto/index.html">
		How to's
	</a>
	<br />
	<a href="../talks/index.html">
		Step by step
	</a>
	<br />
	<a href="../objects/index.html">
		Object reference
	</a>
	<br />
	<a href="index.html">
		UFO Overview
	</a>
	<br />
	<a href="specification.html">
		UFO Spec
	</a>
</p>
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
	<input type="hidden" name="cmd" value="_s-xclick">
	<input type="image" src="https://www.paypal.com/en_US/i/btn/x-click-but21.gif" border="0" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
	<img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
	<input type="hidden" name="encrypted" value="-----BEGIN PKCS7-----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-----END PKCS7-----
	">
</form>




</div>
</div>



<div class="content">

<h1>RoboFab Pen Protocol</h1>
<p>A Pen is a kind of object that standardizes the way how to “draw” outlines:<br />
it is a middle man between an outline and a drawing. In other words:<br />
it is an abstraction for drawing outlines, making sure that outline objects<br />
don’t need to know the details about how and where they’re being drawn, and<br />
that drawings don’t need to know the details of how outlines are stored.<br />
See also PointPen, which is a similar protocol, but more targeted towards editing<br />
and not drawing. See SegmentsVersusPoints for a discussion why we need<br />
both.</p>
<p>The most basic pattern is this:<br />
{{{<br />
#!python<br />
outline.draw(pen)  # ‘outline’ draws itself onto ‘pen’<br />
}}}</p>
<p>Pens can be used to render outlines to the screen, but also to construct<br />
new outlines. Eg. an outline object can be both a drawable object (it has a<br />
draw() method) as well as a pen itself: you <strong>build</strong> an outline using pen<br />
methods.</p>
<p>A Pen has the following methods:<br />
{{{<br />
#!python<br />
<i>init</i>(GlyphSet, ...pen-specific arguments…)  # optional, depends on the pen<br />
moveTo(pt)<br />
lineTo(pt)<br />
curveTo(<strong>pts)  # 0 or more off-curve points and an on-curve point (</strong>)<br />
qCurveTo(*pts)  # ditto.<br />
closePath()<br />
endPath()  # call this method instead of closePath() if a sub path is <strong>not</strong> closed<br />
addComponent(baseGlyphName, transformation)<br />
}}}<br />
*)  If the number of off-curve points is greater than 2, you get a SuperBezier.</p>
<p>A sub path must start with a call to moveTo(), with one exception: you may create<br />
a quadratic sub path containing no on-curve points by calling qCurve“To() with<br />
a point list which has None as the final point.</p>
<p>A sub path must end with a call to closePath() or a call to endPath()</p>
<p>A call to addComponent() must not occur between moveTo() and<br />
closePath()/endPath() calls.</p>
<p>A Pen may need to have a reference to a GlyphSet so it can draw composite glyphs.</p>
<p>FontTools recently grew a Pen [<a href="http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/fonttools/fonttools/Lib/fontTools/pens/basePen.py?rev=HEAD&amp;content-type=text/vnd.viewcvs-markup">http://cvs.sourceforge.net/cgi-bin/viewcvs.cgi/fonttools/fonttools/Lib/fontTools/pens/basePen.py?rev=HEAD&content-type=text/vnd.viewcvs-markup</a> implementation].</p>
<p>We recently had a discussion whether it would be better for pen.addComponent() to take a glyph object rather than a glyph name. As usual, it’s a tradeoff. Since I’ve been thinking about this dilemma before and chose to use the name but forgot why, I thought it would a good idea to record the various tradeoffs.</p>
<p>Pro for using a glyph object:<br />
* the pen doesn’t need to know about glyph sets</p>
<p>Con:<br />
* it makes the caller responsible for looking up the base glyph, which can be messy as well</p>
<p>Pro for using the base glyph name:<br />
* sometimes the glyph is not being drawn, but merely “recorded”, meaning it doesn’t <strong>need</strong> a glyph object to begin with<br />
* ...which in turn means you can “record” composite glyphs before the base glyphs have been recorded</p>
<p>Con:<br />
* Pens need a way to access base glyphs</p>
</div>
</body></html>